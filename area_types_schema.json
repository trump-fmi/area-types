{
  "definitions": {},
  "$schema": "http://json-schema.org/schema#",
  "$id": "https://github.com/trump-fmi/area-types-schema",
  "type": "object",
  "title": "Area types schema",
  "required": [
    "types"
  ],
  "properties": {
    "types": {
      "$id": "#/properties/types",
      "type": "array",
      "title": "Area types list",
      "description": "List of area types that are supposed to be hosted",
      "minItems": 0,
      "uniqueItems": true,
      "items": {
        "$id": "#/properties/types/items",
        "type": "object",
        "title": "Area type",
        "required": [
          "name",
          "sources",
          "z_index"
        ],
        "properties": {
          "name": {
            "$id": "#/properties/types/items/properties/name",
            "type": "string",
            "title": "Area type name",
            "description": "Name of the area type as it may be displayed to the user",
            "default": ""
          },
          "sources": {
            "$id": "#/properties/types/items/properties/sources",
            "type": "array",
            "title": "Area sources list",
            "description": "List of sources to be used for collecting and requesting areas of this type",
            "minItems": 0,
            "uniqueItems": true,
            "items": {
              "$id": "#/properties/types/items/properties/sources/items",
              "type": "object",
              "title": "Source for an area type",
              "required": [
                "resource",
                "table_name",
                "filter_parameters",
                "simplification",
                "zoom_min",
                "zoom_max"
              ],
              "properties": {
                "resource": {
                  "$id": "#/properties/types/items/properties/sources/items/properties/resource",
                  "type": "string",
                  "title": "Resource Name",
                  "description": "Name of the resource under which the geometrical data for this area type source will be provided by the area server. Needs to be unique among all area types"
                },
                "table_name": {
                  "$id": "#/properties/types/items/properties/sources/items/properties/table_name",
                  "type": "string",
                  "title": "Database table name",
                  "description": "Name of the database table to use for storing geometries of this area type source. Needs to be unique among all area types",
                  "pattern": "^(.*)$"
                },
                "filter_parameters": {
                  "$id": "#/properties/types/items/properties/sources/items/properties/filter_parameters",
                  "type": "array",
                  "title": "Filter conditions",
                  "description": "Array of Osmfilter arguments that allow the extraction of geometries for this area type source from OSM data",
                  "items": {
                    "type": "string"
                  }
                },
                "search_highlight": {
                  "$id": "#/properties/types/items/properties/sources/items/properties/search_highlight",
                  "type": "boolean",
                  "title": "Highlight search result",
                  "description": "Specifies whether areas of this area type are supposed to be highlighted as search results",
                  "default": false
                },
                "simplification": {
                  "$id": "#/properties/types/items/properties/sources/items/properties/simplification",
                  "type": "boolean",
                  "title": "Simplification flag",
                  "description": "Specifies whether the geometries for this area type are supposed to be simplified with respect to the zoom level",
                  "default": true
                },
                "zoom_min": {
                  "$id": "#/properties/types/items/properties/sources/items/properties/zoom_min",
                  "type": "number",
                  "title": "Minimum zoom level",
                  "description": "Minimum zoom value (inclusive) for which areas of this type source are supposed to be displayed",
                  "minimum": 0.0,
                  "maximum": 28.0,
                  "default": 0.0
                },
                "zoom_max": {
                  "$id": "#/properties/types/items/properties/sources/items/properties/zoom_max",
                  "type": "number",
                  "title": "Maximum zoom level",
                  "description": "Maximum zoom value (exclusive) for which areas of this type source are supposed to be displayed",
                  "minimum": 0.0,
                  "maximum": 28.0,
                  "default": 28.0
                }
              }
            }
          },
          "z_index": {
            "$id": "#/properties/types/items/properties/z_index",
            "type": "integer",
            "title": "Z-Index",
            "description": "The z-index determines the order in which geometries of different area types are supposed to be drawn. Geometries of an area type with a higher z-index will be drawn on top of geometries of area types with a lower z-index. The behaviour for area types with the same z-index is undefined. The z-index of area types will not interfere with the z-index of other layers within OpenLayers, since those are considered separately",
            "minimum": 0.0,
            "maximum": 1000.0,
            "default": 0.0
          }
        }
      }
    }
  }
}
